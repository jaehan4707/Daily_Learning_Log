# UI Layer

공식문서에서 권장하는 Clean Architecture중 하나의 영역입니다.

![](https://blog.kakaocdn.net/dn/diHxKt/btsDSqGci65/apiF87jMNzsxfuuGkvxaz0/img.png)

UI 레이어에 대한 역할은 다음과 같습니다.

```
화면에 어플리케이션 데이터를 표시하고, 사용자 상호작용의 기본 지점으로의 역할을 수행하는것
```


말이 조금은 딱딱한 감이 있는데, 쉽게 말하면 **사용자가 상호작용할 수 있는 시각적인 화면을 그리는것입니다.**

여기서 상호작용은 많은 시나리오가 있지만, 대표적으로는 `버튼을 누르거나`, `스와이프` 하거나, `회전`하거나 이런 행동들이 있겠죠.

우리는 이러한 사용자들의 행동에 대해서 `변경사항`을 `UI에 업데이트` 되도록해야합니다.

그 외에도 `네트워크 응답`으로 인한 데이터가 변경되었을때도 UI에 업데이트를 해야합니다.

**즉 UI 레이어는 사용자 상호작용, 외부 입력에 반응해서 UI의 상태를 변화시키는 작업을 합니다.**


여기서 중요한 점은 UI는 `UI의 상태를 변화`시키는 작업만 할 뿐 **내부 로직을 알 지 못한다는 점**입니다.

즉 시키는 대로, 데이터를 받는 그대로의 정보를 UI에 표시합니다.


## UI Layer의 흐름
그렇다면 **UI 레이어에서의 흐름**을 알아봅시다.

#### 앱 데이터를 UI에서 사용할 수 있는 데이터로 변환한다.

UI 레이어는 Data 레이어에서 가져온 애플리케이션 상태를 시각적으로 보여주는 역할을 한다.

하지만 데이터 레이어에서 가져온 데이터는 UI에서 표시해야 하는 정보랑은 보통 다른 형태이다.

즉 모든 데이터를 UI에서 사용하지 않는다는 점이다.

그러기 때문에 UI는 가져온 데이터를 필요로 하는 형태로 가공을 한다.

예를 들면 뉴스 목록을 보여주는 화면에서

뉴스에 대한 제목과 사진, 날짜등등을 표시하는데 해당 뉴스에 대한 전체 정보를 해당 화면에서 굳이 가지고 있을 필요는 없다.

예시가 어색할 수도 있지만

**내가 말하고 싶은것은 UI 레이어에서는 Data 레이어에서 받은 정보를 그대로 사용하지 않고, 자신이 필요한 부분만 추출해서
사용하는 데이터로 변환을 한다는 점이다.**

#### 변환한 UI 데이터를 통해서 사용자에게 표시할 수 있는 UI 요소로 변환한다.

즉 데이터를 통해서 화면을 그리는 작업을 한다.

뉴스 목록에 대한 아이템 화면이 있다면 해당 화면에다가 적절한 데이터를 집어넣는 작업이다.



#### 사용자 입력 이벤트를 사용하고, 입력 이벤트의 결과를 필요에 따라 UI 데이터에 반영한다.

사용자의 상호작용(버튼 누르기, 사이드바 화면 클릭)에 따라서 화면을 반영하는데,

예를 들면 즐겨찾기 버튼을 누른다면 즐겨찾기 버튼이 활성화된다거나, 사이드바를 펼치면 사이드바가 보여지고,

토스트, 스낵바와 같이 이벤트의 결과를 UI에 반영한다.


## UI 레이어를 구현하는 방법

UI 레이어를 구현하기 전에 공식문서에서 강조한 기본 적인 내용은 UI state를 정의하는 방법이다.

![](https://blog.kakaocdn.net/dn/bvyyru/btsDQThOlwq/uvlkBxkm0Kgkewr5dRFKoK/img.png)

UI는 `UI elements`와 `UI state`로 구성되어 있다.

Ui Elements는 화면에 그려져 있는 `View`를 의미합니다.

UI State는 위에서 얘기했던 북마크의 여부등과 같이 앱에서 사용자에게 표시하는 정보를 의미합니다.
당연하게도 UI 상태가 변경되면 사용자에게 표시하는 정보가 변경된다는 뜻이기 때문에 변경사항이 즉시 UI에 반영됩니다.

```kotlin
data class BoardUiState(
    val spaceId: String = "",
    val boards: List<Board> = listOf(),
    val selectBoards: List<Board> = listOf(),
)
```

보드목록을 보여주는 화면에 대한 UiState에 코드이다.

공식문서에서는 기능 +UiState로 네이밍하는것을 권장하고 있습니다.


이렇게 정의된 Ui State는 `불변성`을 원칙으로 합니다.

즉 UI에서 직접 수정할 수 없도록해서 UI는 UI 상태를 읽어서 UI 요소를 업데이트하는 한가지 역할에 집중할 수 있습니다.

흔히 사용하는 Activity나 Fragment에서 UI의 상태를 직접적으로 변경하는 코드는 작성하지 않고, UI의 상태를 받아서

UI에 반영하는 코드만을 작성하는것이 올바른 UI 레이어의 역할입니다.

... 추후에 작성 ,,ㅎ